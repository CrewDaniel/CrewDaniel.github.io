<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="[Android] 동영상에 그림 그리기 (10) - 개선 리스트" /><meta property="og:locale" content="ko" /><meta name="description" content="프로젝트 완료 이후 코드 개선" /><meta property="og:description" content="프로젝트 완료 이후 코드 개선" /><link rel="canonical" href="https://crewdaniel.github.io/posts/video_memo_10/" /><meta property="og:url" content="https://crewdaniel.github.io/posts/video_memo_10/" /><meta property="og:site_name" content="Devroid" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-24T03:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Android] 동영상에 그림 그리기 (10) - 개선 리스트" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"프로젝트 완료 이후 코드 개선","url":"https://crewdaniel.github.io/posts/video_memo_10/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://crewdaniel.github.io/posts/video_memo_10/"},"headline":"[Android] 동영상에 그림 그리기 (10) - 개선 리스트","dateModified":"2022-01-24T03:00:00+09:00","datePublished":"2022-01-24T03:00:00+09:00","@context":"https://schema.org"}</script><title>[Android] 동영상에 그림 그리기 (10) - 개선 리스트 | Devroid</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Devroid"><meta name="application-name" content="Devroid"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div class="site-title mt-3"> <a href="/">Devroid</a></div><div class="site-subtitle">안드로이드 개발 일지</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/CrewDaniel" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['alaskay','naver.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Android] 동영상에 그림 그리기 (10) - 개선 리스트</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Android] 동영상에 그림 그리기 (10) - 개선 리스트</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Taehyun Park </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 24, 2022, 3:00 AM +0900" >Jan 24<i class="unloaded">2022-01-24T03:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 24, 2022, 3:00 AM +0900" >Jan 24<i class="unloaded">2022-01-24T03:00:00+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1396 words">7 min read</span></div></div><div class="post-content"><p>이번 포스트에서는 boomerang 앱을 완성한 이후 수정, 개선한 부분들에 대해 작성하겠습니다. 이 포스트의 내용은 코드의 수정사항이 생기면 계속 추가하겠습니다.</p><h1 id="vertex-buffer-object">Vertex Buffer Object</h1><p><a href="https://crewdaniel.github.io/posts/video_memo_5/#vertex-buffer">지난 포스트</a>에서 Vertex Buffer에 대해 작성하면서, <code class="language-plaintext highlighter-rouge">java.nio</code> 패키지의 <code class="language-plaintext highlighter-rouge">ByteBuffer</code>를 사용하는 방법(Client-side buffer)과, OpenGL ES에서 버퍼를 생성하는 두 가지 방법이 있다고 하였습니다. OpenGL ES의 버퍼를 사용하는 방식으로 수정해보았습니다.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">val</span> <span class="py">vertexBuffer</span> <span class="p">=</span> <span class="nc">IntArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nc">GLES20</span><span class="p">.</span><span class="nf">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">vertexBuffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></table></code></div></div><p>우선 버퍼를 생성해야 합니다. <code class="language-plaintext highlighter-rouge">IntArray</code>를 생성하는 것은 빈 배열을 생성하고 그 곳에 생성한 OpenGL ES의 버퍼에 접근할 수 있는 값을 넣어주는 방식입니다. 이러한 방식은 <a href="https://crewdaniel.github.io/posts/video_memo_3/">EGL 초기화</a>나 <a href="https://crewdaniel.github.io/posts/video_memo_4/#texture-%EC%B4%88%EA%B8%B0%ED%99%94">텍스처 생성</a> 등에서 쓰였던 방식이니 이제 익숙하실겁니다.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nc">GLES20</span><span class="p">.</span><span class="nf">glBindBuffer</span><span class="p">(</span><span class="nc">GLES20</span><span class="p">.</span><span class="nc">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">vertexBuffer</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nc">GLES20</span><span class="p">.</span><span class="nf">glBufferData</span><span class="p">(</span><span class="nc">GLES20</span><span class="p">.</span><span class="nc">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">vertexBufferOld</span><span class="p">,</span> <span class="nc">GLES20</span><span class="p">.</span><span class="nc">GL_STATIC_DRAW</span><span class="p">)</span>
<span class="nc">GLES20</span><span class="p">.</span><span class="nf">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">positionLoc</span><span class="p">)</span>
<span class="nc">GLES20</span><span class="p">.</span><span class="nf">glVertexAttribPointer</span><span class="p">(</span>
    <span class="n">positionLoc</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nc">GLES20</span><span class="p">.</span><span class="nc">GL_FLOAT</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">)</span>
</pre></table></code></div></div><p>다음으로 <code class="language-plaintext highlighter-rouge">glBindBuffer(...)</code>를 호출하여 해당 버퍼를 사용하겠다고 지정합니다.</p><p><code class="language-plaintext highlighter-rouge">glBufferData(...)</code>는 버퍼에 들어갈 데이터를 초기화하는 함수입니다. 뒤의 <code class="language-plaintext highlighter-rouge">GLES20.GL_STATIC_DRAW</code> 인자는 이 데이터가 얼마나 자주 수정되고 사용되는지에 대한 값으로, 이 값은 자주 사용되지만 수정하지 않는 데이터에 적용합니다. 이 값에 따라 데이터의 메모리 위치가 결정됩니다.</p><p>이후 <code class="language-plaintext highlighter-rouge">glEnableVertexAttribArray(...)</code>를 호출해 버퍼의 값을 Vertex Shader의 <code class="language-plaintext highlighter-rouge">attribute</code>가 읽을 수 있도록 설정하고, <code class="language-plaintext highlighter-rouge">glVertexAttribPointer(...)</code>로 값을 어떻게 읽을지 설정합니다. 파라미터는 각각</p><ul><li><code class="language-plaintext highlighter-rouge">attribute</code>의 location 값<li>각 값의 개수 (몇 개씩 들어갈 것인지)<li>자료형<li>정규화 여부(0~1 사이의 값으로)<li>하나의 값이 차지하는 크기(2개씩 각 4바이트(float)이므로 8바이트)<li>기본값</ul><p>을 의미합니다.</p><h1 id="in-out-키워드">in, out 키워드</h1><p>결론부터 적자면, OpenGL ES 2.0에서는 해당 키워드를 GLSL ES(ESSL)에 사용할 수 없습니다.</p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span text-data=" Glsl "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">uniform</span> <span class="kt">mat4</span> <span class="n">uMVPMatrix</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">mat4</span> <span class="n">uTexMatrix</span><span class="p">;</span>
<span class="k">attribute</span> <span class="kt">vec4</span> <span class="n">aPosition</span><span class="p">;</span>
<span class="k">attribute</span> <span class="kt">vec4</span> <span class="n">aTextureCoord</span><span class="p">;</span>
<span class="k">varying</span> <span class="kt">vec2</span> <span class="n">vTextureCoord</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="n">uMVPMatrix</span> <span class="o">*</span> <span class="n">aPosition</span><span class="p">;</span>
    <span class="n">vTextureCoord</span> <span class="o">=</span> <span class="p">(</span><span class="n">uTexMatrix</span> <span class="o">*</span> <span class="n">aTextureCoord</span><span class="p">).</span><span class="n">xy</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위의 vertex shader 코드에서 <code class="language-plaintext highlighter-rouge">attribute</code> 대신에, <code class="language-plaintext highlighter-rouge">layout(location = 0) in</code>을 사용할 수 있습니다. 이 경우 얻을 수 있는 장점은:</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="kd">val</span> <span class="py">positionLoc</span><span class="p">:</span> <span class="nc">Int</span>

<span class="n">positionLoc</span> <span class="p">=</span> <span class="nc">GLES20</span><span class="p">.</span><span class="nf">glGetAttribLocation</span><span class="p">(</span><span class="n">programHandle</span><span class="p">,</span> <span class="s">"aPosition"</span><span class="p">)</span>
</pre></table></code></div></div><p>Vertex Shader의 <code class="language-plaintext highlighter-rouge">attribute</code> 변수의 location 값을 가져오기 위해 위와 같은 코드를 작성할 필요가 없어집니다. 대신 <code class="language-plaintext highlighter-rouge">location = </code>으로 지정한 값을 그대로 사용할 수 있습니다. location 값을 가져오는 것이 왜 필요한지 궁금하시다면 바로 위의 <strong>Vertex Buffer Object</strong>에 대해 작성한 코드에서 <code class="language-plaintext highlighter-rouge">positionLoc</code> 값이 어떻게 쓰였는지 확인하시면 도움이 될 것입니다. 만약 in 키워드를 사용한다면 positionLoc 대신에 location으로 지정한 값, 예를 들어 0을 대신 사용할 수 있을 것입니다.</p><p>또한 out 키워드는 <code class="language-plaintext highlighter-rouge">varying</code> 대신에 사용할 수 있습니다. varying은 Vertex Shader의 결과물, 출력값이며 Fragment Shader의 입력값으로 쓰입니다. 이를 Vertex Shader 에서는 out으로 쓰고, Fragment Shader에서 in으로 사용할 수 있습니다.</p><p>in, out 키워드가 도입된 이유는 더 이상 Shader가 두 종류만 존재하지 않기 때문입니다. OpenGL 3.2에서 Vertex Shader와 Fragment Shader 사이에 <code class="language-plaintext highlighter-rouge">Geometry Shader</code>라고 불리는 추가적인 Shader가 추가되었고, 그 이후 버전에서 Tesellation Evaluation Shader, Compute Shader 등이 추가되었습니다. 또한 이러한 Shader들은 Vertex Shader나 Fragment Shader처럼 필수적인 과정이 아니기 때문에 특정 값이 어느 Shader와 연결되는지에 대해서는 알 수 없습니다. 따라서 in, out 키워드로 데이터 입출력을 지정하도록 하여 각 Shader 간의 데이터 연결을 하는 방식으로 변경되었습니다.</p><p><code class="language-plaintext highlighter-rouge">attribute</code>와 <code class="language-plaintext highlighter-rouge">varying</code> 타입 한정자(type qualifier)는 GLSL 1.30에서 deprecated 되었고 GLSL 1.40부터 제거되었습니다. 이는 GLSL ES에서는 3.00부터 이미 제거된 상태에 해당됩니다. 즉 OpenGL ES 3.0 이상을 사용한다면 이 두 타입 한정자를 사용할 수 없습니다.</p><p>하지만 이 프로젝트에서는 OpenGL ES 2.0도 지원하도록 하고 있고, <a href="https://en.wikipedia.org/wiki/OpenGL_Shading_Language#Versions">버전</a>을 확인해보면 OpenGL ES 2.0은 GLSL ES 1.00 버전을 사용합니다. layout 키워드는 GLSL 3.3 (OpenGL 3.3에서 사용)을 기반으로 한 GLSL ES 3.00에서 추가되었으므로 OpenGL ES 2.0을 사용한다면 해당 키워드를 사용할 수 없습니다.</p><p>따라서 런타임에 사용 버전을 결정하는 이 앱에서는 해당 키워드를 사용하지 않거나, 버전에 따라서 사용하는 GLSL ES 코드를 분리할 수 있을 것입니다. 현재는 사용에 지장이 없기 때문에 기존의 코드를 그대로 사용하기로 하였습니다만, 분리한 코드로 테스트하였을 때 성능의 향상이 있다면 수정할 예정입니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/boomerang/'>boomerang</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >Android</a> <a href="/tags/opengl-es/" class="post-tag no-text-decoration" >OpenGL ES</a> <a href="/tags/shader/" class="post-tag no-text-decoration" >Shader</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Android] 동영상에 그림 그리기 (10) - 개선 리스트 - Devroid&url=https://crewdaniel.github.io/posts/video_memo_10/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Android] 동영상에 그림 그리기 (10) - 개선 리스트 - Devroid&u=https://crewdaniel.github.io/posts/video_memo_10/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Android] 동영상에 그림 그리기 (10) - 개선 리스트 - Devroid&url=https://crewdaniel.github.io/posts/video_memo_10/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/cs_3/">[CS] 비동기 프로그래밍 (3) - 동시성 프로그래밍</a><li><a href="/posts/cs_2/">[CS] 비동기 프로그래밍 (2) - 리눅스의 프로세스, 스레드, 태스크</a><li><a href="/posts/cs_1/">[CS] 비동기 프로그래밍 (1) - 캐시 메모리</a><li><a href="/posts/video_memo_10/">[Android] 동영상에 그림 그리기 (10) - 개선 리스트</a><li><a href="/posts/video_memo_8/">[Android] 동영상에 그림 그리기 (8) - BufferQueue, WindowManager, SurfaceFlinger</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/opengl-es/">OpenGL ES</a> <a class="post-tag" href="/tags/cs/">CS</a> <a class="post-tag" href="/tags/surface/">Surface</a> <a class="post-tag" href="/tags/egl/">EGL</a> <a class="post-tag" href="/tags/shader/">Shader</a> <a class="post-tag" href="/tags/surfacetexture/">SurfaceTexture</a> <a class="post-tag" href="/tags/async/">Async</a> <a class="post-tag" href="/tags/asynchronous/">Asynchronous</a> <a class="post-tag" href="/tags/boostcamp/">boostcamp</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/video_memo_5/"><div class="card-body"> <span class="timeago small" >Jan 1<i class="unloaded">2022-01-01T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Android] 동영상에 그림 그리기 (5) - OpenGL ES의 Shader, 그림 그리기</h3><div class="text-muted small"><p> 렌더링을 위해서는 Shader가 필요합니다. 이번 포스트에서는 Shader에 대해 작성하도록 하겠습니다. Shader 렌더링 파이프라인에서 Vertex Shader와 Fragment Shader는 필수적으로 사용자가 직접 구현해야 하는 부분입니다. GLSL이라는 언어를 사용하여 구현하여야 합니다. Vertex Shader 입력되는 점마다 하나씩...</p></div></div></a></div><div class="card"> <a href="/posts/video_memo_4/"><div class="card-body"> <span class="timeago small" >Dec 31, 2021<i class="unloaded">2021-12-31T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Android] 동영상에 그림 그리기 (4) - OpenGL ES의 Texture</h3><div class="text-muted small"><p> 이제 그림을 그릴 시간입니다. Android에서 OpenGL ES 렌더링 과정, 특히 SurfaceTexture를 사용하여 이미지를 텍스처로 사용하는 과정에 대해 정리하겠습니다. SurfaceTexture Texture 초기화 지난 글에서 onFrameAvailableListener를 통해 새로운 이미지 프레임을 받은 것을 알 수 있다고 하였습니...</p></div></div></a></div><div class="card"> <a href="/posts/video_memo_6/"><div class="card-body"> <span class="timeago small" >Jan 2<i class="unloaded">2022-01-02T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Android] 동영상에 그림 그리기 (6) - Framebuffer 전달 및 복사</h3><div class="text-muted small"><p> OpenGL ES의 렌더링 과정을 모두 마치면, EGLSurface에 Framebuffer가 들어가게 됩니다. 그런데 이 앱에서 Framebuffer가 필요한 Surface는 두 곳이 있습니다. 하나는 화면에 표시하기 위한 SurfaceView이고, 다른 하나는 동영상 저장을 위한 MediaCodec 입니다. 이 과정에서 제가 구현한 방법과 각 방법에...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/video_memo_9/" class="btn btn-outline-primary" prompt="Older"><p>[Android] 동영상에 그림 그리기 (9) - SurfaceView로 화면 표시</p></a> <a href="/posts/cs_1/" class="btn btn-outline-primary" prompt="Newer"><p>[CS] 비동기 프로그래밍 (1) - 캐시 메모리</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/CrewDaniel">Taehyun Park</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/opengl-es/">OpenGL ES</a> <a class="post-tag" href="/tags/cs/">CS</a> <a class="post-tag" href="/tags/surface/">Surface</a> <a class="post-tag" href="/tags/egl/">EGL</a> <a class="post-tag" href="/tags/shader/">Shader</a> <a class="post-tag" href="/tags/surfacetexture/">SurfaceTexture</a> <a class="post-tag" href="/tags/async/">Async</a> <a class="post-tag" href="/tags/asynchronous/">Asynchronous</a> <a class="post-tag" href="/tags/boostcamp/">boostcamp</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
